{"ast":null,"code":"import _regeneratorRuntime from\"/Users/apple/Documents/openbush/openbush_frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/apple/Documents/openbush/openbush_frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/apple/Documents/openbush/openbush_frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/apple/Documents/openbush/openbush_frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/apple/Documents/openbush/openbush_frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/apple/Documents/openbush/openbush_frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/apple/Documents/openbush/openbush_frontend/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import ReactDOM from'react-dom';import'antd/dist/antd.css';import{Layout,Card,Button,Space}from'antd';import{Component}from'react';import Header from'./components/Header';import web3 from\"./utils/InitWeb3\";import{HashRouter,Link}from\"react-router-dom\";import\"./Login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Content=Layout.Content,Footer=Layout.Footer;var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.handleLoginClick=_this.handleLoginClick.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"handleLoginClick\",value:function(){var _handleLoginClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var web3Provider;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!window.ethereum){_context.next=10;break;}web3Provider=window.ethereum;_context.prev=2;_context.next=5;return window.ethereum.enable();case 5:_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](2);// 用户不授权时\nconsole.error(\"用户不同意登录\");case 10:window.location.reload();case 11:case\"end\":return _context.stop();}}},_callee,null,[[2,7]]);}));function handleLoginClick(){return _handleLoginClick.apply(this,arguments);}return handleLoginClick;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Layout,{className:\"layout\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Content,{style:{padding:'0 50px'},children:/*#__PURE__*/_jsx(\"div\",{className:\"site-layout-content\",children:/*#__PURE__*/_jsx(Card,{className:\"Card\",title:\"\\u8FDE\\u63A5\\u5230\\u60A8\\u7684\\u94B1\\u5305\",style:{width:700},children:/*#__PURE__*/_jsxs(\"div\",{className:\"inner_card\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Card,{type:\"inner\",title:\"MetaMask\",extra:/*#__PURE__*/_jsx(\"a\",{href:\"https://metamask.io/\",children:\"MetaMask\\u94B1\\u5305\\u4E0B\\u8F7D\"}),children:/*#__PURE__*/_jsx(\"div\",{className:\"inside_card_content\",children:/*#__PURE__*/_jsxs(Space,{direction:\"vertical\",size:40,children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{style:{width:500,height:40,fontSize:17},className:\"card_button\",type:\"primary\",shape:\"round\",onClick:this.handleLoginClick,children:\"\\u8FDE\\u63A5Metamask\"}),/*#__PURE__*/_jsx(Button,{style:{width:500,height:40,fontSize:17},className:\"card_button\",type:\"primary\",shape:\"round\",children:/*#__PURE__*/_jsx(HashRouter,{children:/*#__PURE__*/_jsx(Link,{to:\"./Profile\",children:\"\\u4E2A\\u4EBA\\u8D26\\u6237\"})})}),/*#__PURE__*/_jsx(\"br\",{})]})})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]})})})}),/*#__PURE__*/_jsx(Footer,{style:{textAlign:'center'},children:\"Openbush \\xA92021 Created by spring\"})]});}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/Users/apple/Documents/openbush/openbush_frontend/src/Dapp/Login.js"],"names":["React","ReactDOM","Layout","Card","Button","Space","Component","Header","web3","HashRouter","Link","Content","Footer","Login","props","handleLoginClick","bind","window","ethereum","web3Provider","enable","console","error","location","reload","padding","width","height","fontSize","textAlign"],"mappings":"y5BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,WAArB,CACA,MAAO,oBAAP,CACA,OAASC,MAAT,CAAiBC,IAAjB,CAAuBC,MAAvB,CAA+BC,KAA/B,KAA2C,MAA3C,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,kBAAjB,CACA,OAASC,UAAT,CAAqBC,IAArB,KAAiC,kBAAjC,CACA,MAAO,aAAP,C,wFACA,GAAQC,CAAAA,OAAR,CAA4BT,MAA5B,CAAQS,OAAR,CAAiBC,MAAjB,CAA4BV,MAA5B,CAAiBU,MAAjB,C,GAEMC,CAAAA,K,8FACF,eAAYC,KAAZ,CAAkB,uCACd,uBAAMA,KAAN,EACA,MAAKC,gBAAL,CAAwB,MAAKA,gBAAL,CAAsBC,IAAtB,+BAAxB,CAFc,aAGjB,C,2IAED,wJAEQC,MAAM,CAACC,QAFf,0BAGQC,YAAY,CAAGF,MAAM,CAACC,QAAtB,CAHR,sCAMkBD,CAAAA,MAAM,CAACC,QAAP,CAAgBE,MAAhB,EANlB,uFAQY;AACAC,OAAO,CAACC,KAAR,CAAc,SAAd,EATZ,QAYIL,MAAM,CAACM,QAAP,CAAgBC,MAAhB,GAZJ,oE,gIAgBA,iBAAQ,CAEJ,mBACI,MAAC,MAAD,EAAQ,SAAS,CAAC,QAAlB,wBACI,KAAC,MAAD,IADJ,cAEI,KAAC,OAAD,EAAS,KAAK,CAAE,CAAEC,OAAO,CAAE,QAAX,CAAhB,uBACA,YAAK,SAAS,CAAC,qBAAf,uBACI,KAAC,IAAD,EAAM,SAAS,CAAC,MAAhB,CAAuB,KAAK,CAAC,4CAA7B,CAAuC,KAAK,CAAE,CAAEC,KAAK,CAAE,GAAT,CAA9C,uBACI,aAAK,SAAS,CAAC,YAAf,wBACI,aADJ,cAEI,aAFJ,cAGI,KAAC,IAAD,EAAM,IAAI,CAAC,OAAX,CAAmB,KAAK,CAAC,UAAzB,CAAoC,KAAK,cAAE,UAAG,IAAI,CAAC,sBAAR,8CAA3C,uBACI,YAAK,SAAS,CAAC,qBAAf,uBACI,MAAC,KAAD,EAAO,SAAS,CAAC,UAAjB,CAA4B,IAAI,CAAE,EAAlC,wBACI,aADJ,cAEI,KAAC,MAAD,EAAQ,KAAK,CAAE,CAACA,KAAK,CAAE,GAAR,CAAaC,MAAM,CAAE,EAArB,CAAyBC,QAAQ,CAAE,EAAnC,CAAf,CAAuD,SAAS,CAAC,aAAjE,CAA+E,IAAI,CAAC,SAApF,CAA8F,KAAK,CAAC,OAApG,CAA4G,OAAO,CAAE,KAAKb,gBAA1H,kCAFJ,cAKI,KAAC,MAAD,EAAQ,KAAK,CAAE,CAACW,KAAK,CAAE,GAAR,CAAaC,MAAM,CAAE,EAArB,CAAyBC,QAAQ,CAAE,EAAnC,CAAf,CAAuD,SAAS,CAAC,aAAjE,CAA+E,IAAI,CAAC,SAApF,CAA8F,KAAK,CAAC,OAApG,uBACI,KAAC,UAAD,wBACI,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,sCADJ,EADJ,EALJ,cAYI,aAZJ,GADJ,EADJ,EAHJ,cAqBI,aArBJ,cAsBI,aAtBJ,GADJ,EADJ,EADA,EAFJ,cAgCI,KAAC,MAAD,EAAQ,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAb,CAAf,iDAhCJ,GADJ,CAoCH,C,mBA5DevB,S,EA+DpB,cAAeO,CAAAA,KAAf","sourcesContent":["import React from \"react\";\r\nimport ReactDOM from 'react-dom';\r\nimport 'antd/dist/antd.css';\r\nimport { Layout, Card, Button, Space} from 'antd';\r\nimport { Component } from 'react';\r\nimport Header from './components/Header';\r\nimport web3 from \"./utils/InitWeb3\";\r\nimport { HashRouter, Link } from \"react-router-dom\";\r\nimport \"./Login.css\"\r\nconst { Content, Footer } = Layout;\r\n\r\nclass Login extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.handleLoginClick = this.handleLoginClick.bind(this);\r\n    }\r\n\r\n    async handleLoginClick() {\r\n        let web3Provider;\r\n        if (window.ethereum) {\r\n            web3Provider = window.ethereum;\r\n            try {\r\n                // 请求用户授权\r\n                await window.ethereum.enable();\r\n            } catch (error) {\r\n                // 用户不授权时\r\n                console.error(\"用户不同意登录\");\r\n            }\r\n        }\r\n        window.location.reload();\r\n    }\r\n\r\n\r\n    render(){\r\n        \r\n        return(\r\n            <Layout className=\"layout\">\r\n                <Header />\r\n                <Content style={{ padding: '0 50px' }}>\r\n                <div className=\"site-layout-content\">\r\n                    <Card className=\"Card\" title=\"连接到您的钱包\" style={{ width: 700 }}>\r\n                        <div className=\"inner_card\">\r\n                            <br/>\r\n                            <br/>\r\n                            <Card type=\"inner\" title=\"MetaMask\" extra={<a href=\"https://metamask.io/\">MetaMask钱包下载</a>}>\r\n                                <div className=\"inside_card_content\">\r\n                                    <Space direction=\"vertical\" size={40}>\r\n                                        <br/>\r\n                                        <Button style={{width: 500, height: 40, fontSize: 17}} className=\"card_button\" type=\"primary\" shape=\"round\" onClick={this.handleLoginClick} >\r\n                                            连接Metamask\r\n                                        </Button>\r\n                                        <Button style={{width: 500, height: 40, fontSize: 17}} className=\"card_button\" type=\"primary\" shape=\"round\">\r\n                                            <HashRouter>\r\n                                                <Link to=\"./Profile\">\r\n                                                    个人账户\r\n                                                </Link>\r\n                                            </HashRouter>\r\n                                        </Button>\r\n                                        <br/>\r\n                                    </Space>\r\n                                </div>\r\n                            </Card>\r\n                            <br/>\r\n                            <br/>\r\n                        </div>\r\n                    </Card>\r\n                </div>\r\n                </Content>\r\n                <Footer style={{ textAlign: 'center' }}>Openbush ©2021 Created by spring</Footer>\r\n            </Layout>\r\n        );\r\n    }\r\n} \r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}