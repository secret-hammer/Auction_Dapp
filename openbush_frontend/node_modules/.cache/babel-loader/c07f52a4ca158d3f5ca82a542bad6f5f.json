{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Documents/openbush/openbush_frontend/src/Dapp/Market.js\";\nimport React from \"react\";\nimport ReactDOM from 'react-dom';\nimport { Layout, List } from \"antd\";\nimport web3 from \"./utils/InitWeb3\";\nimport contractInstance from \"./utils/config\";\nimport MyMarketCard from \"./components/card/market-card\";\nimport Header from \"./components/Header\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Content,\n  Footer\n} = Layout;\nexport default class Market extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      NFTs: [],\n      NFTNum: 0,\n      isConnected: false,\n      address: \"\"\n    };\n  }\n\n  async getNFTs(NFTIds) {\n    let NFTs = [];\n    let i = 0;\n\n    for (; i < 10 && NFTIds[i] != 11; i++) {\n      let NFT = await contractInstance.methods.NFTs(NFTIds[i]).call();\n      NFTs.push(NFT);\n      console.log(NFT);\n    }\n\n    this.setState({\n      NFTs: NFTs,\n      NFTNum: i\n    });\n  }\n\n  async componentDidMount() {\n    let accounts = await web3.eth.getAccounts();\n\n    if (accounts.length == 0) {\n      this.setState({\n        isConnected: false\n      });\n    } else {\n      await this.setState({\n        isConnected: true,\n        address: accounts[0]\n      });\n      let NFTIds = await contractInstance.methods.getAllAuction().call();\n      console.log(NFTIds);\n      await this.getNFTs(NFTIds);\n      console.log(this.state.NFTs);\n    }\n\n    await contractInstance.methods.deposit().send({\n      from: accounts[0],\n      value: web3.utils.toWei(\"10\", \"ether\")\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Content, {\n        style: {\n          padding: '0 50px'\n        },\n        children: /*#__PURE__*/_jsxDEV(List, {\n          grid: {\n            gutter: 32,\n            column: 2\n          },\n          itemLayout: \"horizontal\",\n          dataSource: this.state.NFTs,\n          renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n            children: /*#__PURE__*/_jsxDEV(MyMarketCard, {\n              NFT: item\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {\n        style: {\n          textAlign: 'center'\n        },\n        children: \"Openbush \\xA92021 Created by spring\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nReactDOM.render( /*#__PURE__*/_jsxDEV(Market, {}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 85,\n  columnNumber: 5\n}, this), document.getElementById(\"root\"));","map":{"version":3,"sources":["/Users/apple/Documents/openbush/openbush_frontend/src/Dapp/Market.js"],"names":["React","ReactDOM","Layout","List","web3","contractInstance","MyMarketCard","Header","Content","Footer","Market","Component","state","NFTs","NFTNum","isConnected","address","getNFTs","NFTIds","i","NFT","methods","call","push","console","log","setState","componentDidMount","accounts","eth","getAccounts","length","getAllAuction","deposit","send","from","value","utils","toWei","render","padding","gutter","column","item","textAlign","document","getElementById"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport ReactDOM from 'react-dom';\r\nimport {Layout, List} from \"antd\";\r\n\r\nimport web3 from \"./utils/InitWeb3\";\r\nimport contractInstance from \"./utils/config\";\r\nimport MyMarketCard from \"./components/card/market-card\";\r\nimport Header from \"./components/Header\";\r\n\r\nconst {Content, Footer} = Layout;\r\nexport default class Market extends React.Component{\r\n    state={\r\n        NFTs: [],\r\n        NFTNum: 0,\r\n        isConnected: false,\r\n        address: \"\",\r\n    }\r\n\r\n    async getNFTs(NFTIds){\r\n        let NFTs = [];\r\n        let i = 0;\r\n        for(; i < 10 && NFTIds[i] != 11; i++){\r\n            let NFT = await contractInstance.methods.NFTs(NFTIds[i]).call()\r\n            NFTs.push(NFT);\r\n            console.log(NFT);\r\n        }\r\n        this.setState({\r\n            NFTs: NFTs,\r\n            NFTNum: i,\r\n        })\r\n    }\r\n\r\n    async componentDidMount(){\r\n        let accounts = await web3.eth.getAccounts()\r\n        if(accounts.length == 0){\r\n            this.setState({\r\n                isConnected: false,\r\n            })\r\n        }\r\n        else {\r\n            await this.setState({\r\n                isConnected: true,\r\n                address: accounts[0]\r\n            })\r\n\r\n            let NFTIds = await contractInstance.methods.getAllAuction().call();\r\n            console.log(NFTIds);\r\n\r\n            await this.getNFTs(NFTIds);\r\n            console.log(this.state.NFTs);\r\n        }\r\n\r\n        await contractInstance.methods.deposit().send({\r\n            from: accounts[0],\r\n            value: web3.utils.toWei(\"10\", \"ether\"),\r\n            \r\n        })\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                <Header />\r\n                <Content style={{padding: '0 50px'}}>\r\n                    <List\r\n                        grid={{ gutter: 32, column: 2 }}\r\n                        itemLayout=\"horizontal\"\r\n                        dataSource={this.state.NFTs}\r\n                        renderItem={(item) =>(\r\n                            <List.Item>\r\n                                <MyMarketCard NFT={item}/>\r\n                            </List.Item>\r\n                        )}    \r\n                    >\r\n                    </List>\r\n                </Content>\r\n                <Footer style={{ textAlign: 'center' }}>Openbush Â©2021 Created by spring</Footer>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nReactDOM.render(\r\n    <Market />,\r\n    document.getElementById(\"root\")\r\n)"]},"metadata":{},"sourceType":"module"}